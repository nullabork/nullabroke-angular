# Nullabroke Application Flow & Architecture

This document describes the application flow, component architecture, and user journey for the Nullabroke Due Diligence Portal.

---

## Table of Contents

1. [Application Overview](#application-overview)
2. [Routing Structure](#routing-structure)
3. [Main User Flows](#main-user-flows)
4. [Component Architecture](#component-architecture)
5. [State Management](#state-management)
6. [UI/UX Patterns](#uiux-patterns)
7. [Angular Migration Guide](#angular-migration-guide)

---

## Application Overview

Nullabroke is an SEC filing research application that allows users to:

1. **Search SEC filings** using a custom SQL-like query language
2. **View filing documents** in an embedded frame with contextual analysis
3. **Explore companies** and their relationships, subsidiaries, and filings
4. **Analyze 13F holdings** to track institutional investor positions
5. **Research patents** through PatentsView integration

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        NULLABROKE APP                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Filings  â”‚   â”‚ Document â”‚   â”‚ Company  â”‚   â”‚   Holdings   â”‚ â”‚
â”‚  â”‚ (Search) â”‚â”€â”€â–¶â”‚  (View)  â”‚   â”‚ (Search) â”‚   â”‚   (13F)      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚       â”‚               â”‚              â”‚               â”‚          â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                       â–¼              â–¼                          â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚              â”‚      Sidebar System         â”‚                    â”‚
â”‚              â”‚  (Context-aware navigation) â”‚                    â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Routing Structure

```typescript
// Angular equivalent routes
const routes = [
    // Main filing search/listing
    { path: '', component: FilingsComponent },
    { path: ':TinyString', component: FilingsComponent },
    
    // Document viewer
    { path: 'document/:AccessionNumber', component: DocumentComponent },
    { path: 'document/:AccessionNumber/:Seq', component: DocumentComponent },
    
    // Company search
    { path: 'companies', component: CompanyComponent },
    { path: 'companies/:query', component: CompanyComponent },
    
    // 13F Holdings explorer
    { path: 'company/:cik/holdings', component: HoldingsComponent },
    
    // Patents search
    { path: 'patents', component: PatentsComponent },
    { path: 'patents/:query', component: PatentsComponent },
    
    // XBRL explorer (referenced but route not in current codebase)
    { path: 'xbrl', component: XbrlComponent },
    
    // Visualiser
    { path: 'visualiser', component: VisualiserComponent },
    { path: 'visualiser/:TinyString', component: VisualiserComponent },
    
    // News feed editor
    { path: 'news/add', component: NewsFeedEditComponent },
];
```

---

## Main User Flows

### Flow 1: Filing Search â†’ Document View

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           FILINGS PAGE (/)                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                         TOP TOOLBAR                                  â”‚ â”‚
â”‚ â”‚  [ğŸ”¨ Query] [âš¡ Live] [List] [Thumbnails] [Search Box]    [Theme] [Î²]â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                    QUERY SELECTOR PANEL                              â”‚ â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚ â”‚
â”‚ â”‚  â”‚   Recent     â”‚ â”‚ By Ticker    â”‚ â”‚ By Company   â”‚ ...             â”‚ â”‚
â”‚ â”‚  â”‚   Filings    â”‚ â”‚              â”‚ â”‚    Name      â”‚                 â”‚ â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚ â”‚
â”‚ â”‚  Pre-defined query templates with parameter inputs                   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              OR                                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                    FILTER INPUT                                      â”‚ â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚ â”‚  â”‚ form_type in ('10-K', '10-Q') order by snowflake desc limit 15â”‚  â”‚ â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚ â”‚  SQL-like query editor with syntax highlighting                      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                    RESULTS TABLE                                     â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â”‚
â”‚ â”‚ â”‚DOC â”‚ CIK â”‚ Ticker â”‚    Company     â”‚ Form â”‚ Desc  â”‚    Filed     â”‚â”‚ â”‚
â”‚ â”‚ â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚ â”‚
â”‚ â”‚ â”‚ ğŸ“„ â”‚1234 â”‚  AAPL  â”‚ Apple Inc      â”‚ 10-K â”‚ Annualâ”‚ 2024-01-15   â”‚â”‚ â”‚
â”‚ â”‚ â”‚ ğŸ“„ â”‚5678 â”‚  MSFT  â”‚ Microsoft Corp â”‚ 8-K  â”‚ Event â”‚ 2024-01-14   â”‚â”‚ â”‚
â”‚ â”‚ â”‚ ğŸ“„ â”‚9012 â”‚  GOOGL â”‚ Alphabet Inc   â”‚ 10-Q â”‚ Qtrly â”‚ 2024-01-13   â”‚â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â”‚
â”‚ â”‚  Virtual scrolling table (react-base-table)                          â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                      BOTTOM TOOLBAR                                  â”‚ â”‚
â”‚ â”‚  [âš™ï¸ Settings] [ğŸ”„ Load More]                         [Discord Link] â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚ Click DOC icon
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      DOCUMENT PAGE (/document/:id)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ SIDE  â”‚                                                                  â”‚
â”‚ TOOL  â”‚              DOCUMENT FRAME (iframe)                            â”‚
â”‚ BAR   â”‚                                                                  â”‚
â”‚       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ [ğŸŒ]  â”‚  â”‚                                                           â”‚  â”‚
â”‚ [ğŸŒ™]  â”‚  â”‚    SEC FILING DOCUMENT                                   â”‚  â”‚
â”‚       â”‚  â”‚                                                           â”‚  â”‚
â”‚       â”‚  â”‚    Item 1.01 - Entry into Material Agreement            â”‚  â”‚
â”‚       â”‚  â”‚    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•              â”‚  â”‚
â”‚       â”‚  â”‚                                                           â”‚  â”‚
â”‚       â”‚  â”‚    On January 15, 2024, [COMPANY NAME] entered          â”‚  â”‚
â”‚       â”‚  â”‚    into an agreement with...                             â”‚  â”‚
â”‚       â”‚  â”‚                                                           â”‚  â”‚
â”‚       â”‚  â”‚    â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“  â† User selects text                 â”‚  â”‚
â”‚       â”‚  â”‚                                                           â”‚  â”‚
â”‚       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚       â”‚                                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      â”‚         SIDEBAR SYSTEM            â”‚
â”‚                                      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                                      â”‚  â”‚     ROOT SIDEBAR             â”‚ â”‚
â”‚                                      â”‚  â”‚  â”œâ”€ ğŸ“„ 10-K Annual Report    â”‚ â”‚
â”‚                                      â”‚  â”‚  â”œâ”€ ğŸ¢ Apple Inc (AAPL)      â”‚ â”‚
â”‚                                      â”‚  â”‚  â”‚   â””â”€ Company Details      â”‚ â”‚
â”‚                                      â”‚  â”‚  â”œâ”€ ğŸ“‹ Documents (5)         â”‚ â”‚
â”‚                                      â”‚  â”‚  â”‚   â”œâ”€ exhibit10-1.htm     â”‚ â”‚
â”‚                                      â”‚  â”‚  â”‚   â”œâ”€ financial.xml        â”‚ â”‚
â”‚                                      â”‚  â”‚  â”‚   â””â”€ ...                  â”‚ â”‚
â”‚                                      â”‚  â”‚  â”œâ”€ ğŸ‘¤ People (12)           â”‚ â”‚
â”‚                                      â”‚  â”‚  â”œâ”€ ğŸ›ï¸ Organizations (8)     â”‚ â”‚
â”‚                                      â”‚  â”‚  â””â”€ ğŸ“ Locations (3)         â”‚ â”‚
â”‚                                      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                      â”‚                                   â”‚
â”‚                                      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                                      â”‚  â”‚  INFERENCE SIDEBAR (Dynamic) â”‚ â”‚
â”‚                                      â”‚  â”‚  (appears on text selection)  â”‚ â”‚
â”‚                                      â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚                                      â”‚  â”‚  â”‚ Selected: "$5.2 billion" â”‚ â”‚ â”‚
â”‚                                      â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚
â”‚                                      â”‚  â”‚  â”‚ Type: Currency           â”‚ â”‚ â”‚
â”‚                                      â”‚  â”‚  â”‚ Value: 5,200,000,000     â”‚ â”‚ â”‚
â”‚                                      â”‚  â”‚  â”‚ Related XBRL tags...     â”‚ â”‚ â”‚
â”‚                                      â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚                                      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Flow 2: Company Search â†’ Company Details

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      COMPANY PAGE (/companies)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                    SEARCH INPUT                                      â”‚ â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚ â”‚  â”‚ ğŸ” Search for a company: Apple                                â”‚  â”‚ â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                    RESULTS TABLE                                     â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚ â”‚       Name          â”‚   CIK   â”‚     Tickers        â”‚  SIC Code  â”‚ â”‚ â”‚
â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚
â”‚ â”‚ â”‚ APPLE INC           â”‚ 320193  â”‚  AAPL              â”‚ 3571       â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ APPLE HOSPITALITY   â”‚ 1418121 â”‚  APLE              â”‚ 6798       â”‚ â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â”‚                                                                      â”‚ â”‚
â”‚ â”‚  Click row to open Company Sidebar â†’                                 â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                          COMPANY SIDEBAR                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  APPLE INC (320193)                                     [âœ•] [â¬…]  â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚                                                                    â”‚  â”‚
â”‚  â”‚  ğŸ” Google | Twitter | Yahoo | LinkedIn | ...                     â”‚  â”‚
â”‚  â”‚                                                                    â”‚  â”‚
â”‚  â”‚  ğŸ“Š COMPANY INFO                                                  â”‚  â”‚
â”‚  â”‚  â”œâ”€ Name: Apple Inc                                               â”‚  â”‚
â”‚  â”‚  â”œâ”€ CIK: 320193                                                   â”‚  â”‚
â”‚  â”‚  â”œâ”€ Tickers: AAPL                                                 â”‚  â”‚
â”‚  â”‚  â”œâ”€ SIC: 3571 - Electronic Computers                              â”‚  â”‚
â”‚  â”‚  â”œâ”€ State: CA                                                     â”‚  â”‚
â”‚  â”‚  â””â”€ Fiscal Year End: 0930                                         â”‚  â”‚
â”‚  â”‚                                                                    â”‚  â”‚
â”‚  â”‚  ğŸ“‹ 12 Assignee Patents â†’                                         â”‚  â”‚
â”‚  â”‚                                                                    â”‚  â”‚
â”‚  â”‚  ğŸ¢ Subsidiaries (143) â–¼                                          â”‚  â”‚
â”‚  â”‚  â”œâ”€ Apple Operations LLC                                          â”‚  â”‚
â”‚  â”‚  â”œâ”€ Apple Services Inc                                            â”‚  â”‚
â”‚  â”‚  â””â”€ ...                                                           â”‚  â”‚
â”‚  â”‚                                                                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Flow 3: Holdings Analysis (13F Explorer)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                HOLDINGS PAGE (/company/:cik/holdings)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚  [Search] [All] [Opened] [Closed] [Reduced] [Added] [Neutral]       â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”‚  FILING SELECTOR      â”‚           HOLDINGS COMPARISON TABLE           â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚  â”‚ Berkshire       â”‚  â”‚  â”‚                  Quantity      Value    â”‚  â”‚
â”‚ â”‚  â”‚ Hathaway Inc    â”‚  â”‚  â”‚ Issuer  CUSIP   2024Q1 2023Q4  Change   â”‚  â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚ â”‚                       â”‚  â”‚ AAPL   037833   915M   916M   -0.1%      â”‚  â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚ BAC    060505   1.03B  1.03B   0.0%      â”‚  â”‚
â”‚ â”‚  â”‚ âœ“ 13F-HR        â”‚  â”‚  â”‚ CVX    166764   126M   119M   +5.9%      â”‚  â”‚
â”‚ â”‚  â”‚   2024-02-14    â”‚  â”‚  â”‚ NEW    ------   50M    ---    [opened]   â”‚  â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚ SOLD   ------   ---    25M    [closed]   â”‚  â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚ â”‚  â”‚ âœ“ 13F-HR        â”‚  â”‚                                               â”‚
â”‚ â”‚  â”‚   2023-11-14    â”‚  â”‚  Footer: Count, Total Values, % Change        â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                                               â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                                               â”‚
â”‚ â”‚  â”‚   13F-HR        â”‚  â”‚                                               â”‚
â”‚ â”‚  â”‚   2023-08-14    â”‚  â”‚                                               â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                                               â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Component Architecture

### Core Component Hierarchy

```
App
â”œâ”€â”€ ThemeContextProvider (dark/light mode)
â”‚   â””â”€â”€ Router
â”‚       â”œâ”€â”€ Filings
â”‚       â”‚   â”œâ”€â”€ Toolbar
â”‚       â”‚   â”œâ”€â”€ QuerySelector OR Filter
â”‚       â”‚   â”œâ”€â”€ Settings (column visibility)
â”‚       â”‚   â””â”€â”€ TableProxy
â”‚       â”‚       â”œâ”€â”€ TableLoading
â”‚       â”‚       â””â”€â”€ TableNoResults
â”‚       â”‚
â”‚       â”œâ”€â”€ Document
â”‚       â”‚   â”œâ”€â”€ Toolbar (vertical)
â”‚       â”‚   â”œâ”€â”€ DocumentFrame (iframe)
â”‚       â”‚   â””â”€â”€ AbstractSidebar[] (stacked sidebars)
â”‚       â”‚       â””â”€â”€ [RootSidebar | FilingSidebar | CompanySidebar | ...]
â”‚       â”‚
â”‚       â”œâ”€â”€ Company
â”‚       â”‚   â”œâ”€â”€ Toolbar
â”‚       â”‚   â”œâ”€â”€ Search Input
â”‚       â”‚   â”œâ”€â”€ TableProxy
â”‚       â”‚   â””â”€â”€ AbstractSidebar[]
â”‚       â”‚
â”‚       â””â”€â”€ Holdings
â”‚           â”œâ”€â”€ Toolbar
â”‚           â”œâ”€â”€ FilingCard[] (selector)
â”‚           â””â”€â”€ Holdings Table
```

### Sidebar System Architecture

The sidebar system is a key architectural pattern - a dynamic, stackable panel system:

```typescript
// Sidebar Types (SidebarMap.js)
interface SidebarType {
    type: string;           // Component identifier
    name: string;           // Display name
    transformValue?: (value: any) => any;  // Value transformer
    title?: string | ((value: any) => string);  // Title generator
    requirements?: (filter: any) => boolean;    // Conditional display
}

// Available Sidebars:
// - RootSidebar: Main document context (always visible in document view)
// - FilingSidebar: Filing search results
// - CompanySidebar: Company details, subsidiaries, patents
// - EntitySidebar: Named entity details (person/org)
// - XbrlSidebar: XBRL data explorer
// - XbrlTaxonomySidebar: XBRL taxonomy browser
// - PatentSidebar: Patent details
// - YelpSidebar: Nearby restaurants (location-based)
// - PlacesSidebar: Google Places integration
```

### Sidebar Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SIDEBAR NAVIGATION                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  User Action                   Sidebar Stack                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                     â”‚
â”‚                                                                  â”‚
â”‚  Document Load â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ [RootSidebar]                    â”‚
â”‚                                     â”‚                            â”‚
â”‚  Click Company â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ [RootSidebar][CompanySidebar]    â”‚
â”‚                                           â”‚                      â”‚
â”‚  Click Subsidiary â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ [Root][Company][EntitySidebar]   â”‚
â”‚                                                   â”‚              â”‚
â”‚  âœ• Close EntitySidebar â”€â”€â”€â”€â”€â”€â–¶ [Root][Company]                  â”‚
â”‚                                                                  â”‚
â”‚  Text Selection â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ [Root] + Inferences update       â”‚
â”‚                                (no new sidebar, updates context) â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Inference System

When users select text in a document, the system analyzes it:

```typescript
// InferenceTypes and their handlers
const InferenceMap = {
    Date: ContextInferenceDate,           // Date parsing, period lookups
    Entity: ContextInferenceEntity,       // Named entity â†’ Company/Person
    AccessionNumber: ContextInferenceAccessionNumber,  // Link to filing
    CIK: ContextInferenceCIK,             // Company filings
    SECFileNumber: ContextInferenceSECFileNumber,     // File number search
    Measurement: ContextInferenceMeasurement,  // Numeric measurements
    Number: ContextInferenceNumber,       // Raw numbers
    Currency: ContextInferenceCurrency,   // Dollar amounts
    IRSNumber: ContextInferenceIRSNumber, // Tax IDs
    XBRL: ContextInferenceXBRL,           // XBRL tag references
    Legislation: ContextInferenceLegislation,  // Legal references
    Definition: ContextInferenceDefinition     // Term definitions
};
```

### Menu System (CMenu)

A collapsible menu system for sidebar content:

```
CMenu
â”œâ”€â”€ CGroup (collapsible section)
â”‚   â”œâ”€â”€ CHeader (section title)
â”‚   â”œâ”€â”€ CContent (free-form content)
â”‚   â””â”€â”€ CItem[] (clickable items)
â”‚       â””â”€â”€ CSubmenu (nested menu)
â”œâ”€â”€ CGenericActionList (dynamic item list)
â””â”€â”€ CSidebarActionItems (items with sidebar navigation)
```

---

## State Management

### Local State Patterns

```typescript
// React Hooks used throughout
const [data, setData] = useState(null);
const [loading, setLoading] = useState(false);
const [error, setError] = useState(null);

// Custom hook for API calls
const useEndpoint = (endpointFn, dependencies, transform) => {
    // Returns { data, loading, error }
    // Handles abort controllers, error states, transformations
};

// Persisted state (localStorage)
const useLocalStorage = (key, initialValue) => {
    // Returns [value, setValue]
    // Automatically persists to localStorage
};
```

### Context Providers

```typescript
// Theme Context
interface ThemeState {
    theme: 't-dark' | 't-blue';
}

// Sidebar Context (per sidebar instance)
interface SidebarContextValue {
    addSidebar: (type: string, value: any, meta?: object) => void;
    closeSidebar: () => void;
}

// Clipboard Context (partially implemented)
interface ClipboardContext {
    add: (type: string, item: any) => void;
    items: Map<string, any[]>;
}
```

### Data Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      DATA FLOW                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  User Input (Query)                                           â”‚
â”‚       â”‚                                                       â”‚
â”‚       â–¼                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  Component  â”‚â”€â”€â”€â–¶â”‚ useEndpoint â”‚â”€â”€â”€â–¶â”‚  APIHelper  â”‚      â”‚
â”‚  â”‚   State     â”‚    â”‚    Hook     â”‚    â”‚   Class     â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚       â”‚                    â”‚                   â”‚             â”‚
â”‚       â”‚              Transform                 â”‚             â”‚
â”‚       â”‚                    â”‚                   â–¼             â”‚
â”‚       â”‚                    â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚       â”‚                    â”‚           â”‚  Backend    â”‚      â”‚
â”‚       â”‚                    â”‚           â”‚    API      â”‚      â”‚
â”‚       â”‚                    â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚       â”‚                    â”‚                   â”‚             â”‚
â”‚       â–¼                    â–¼                   â”‚             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚             â”‚
â”‚  â”‚   Render    â”‚â—€â”€â”€â”€â”‚ { data,     â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚  â”‚  Component  â”‚    â”‚   loading,  â”‚                         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   error }   â”‚                         â”‚
â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## UI/UX Patterns

### Table Component (TableProxy)

Uses `react-base-table` for virtual scrolling:

```typescript
interface TableConfig {
    columns: Column[];        // Column definitions from JSON
    data: any[];              // Row data
    estimatedRowHeight?: number;  // For variable height rows
    rowRenderer?: (props) => ReactNode;  // Custom row rendering
    rowEventHandlers?: {
        onClick?: (event) => void;
    };
}

// Column definition format (columns.json)
interface Column {
    key: string;
    dataKey: string;
    title: string;
    width: number;
    format?: string;       // Formatter key
    hidden?: boolean;
    toggleHidden?: boolean;  // User can toggle visibility
}

// Formatters applied to cells
const formatters = {
    texty: Truncate with tooltip,
    bytes: Format as KB/MB/GB,
    timestamp: Format date/time,
    ticker: Link to ticker search,
    accessionnumber: Format as accession link,
    tags: Render tag badges,
    // etc.
};
```

### Row Renderers

```typescript
// Default: Simple row
const defaultRenderer = ({ cells }) => cells;

// Thumbnails: Row + document thumbnails below
const thumbnailRenderer = ({ rowData, cells }) => (
    <div>
        <div>{cells}</div>
        <Thumbnails accessionNumber={rowData.AccessionNumber} />
    </div>
);
```

### Loading States

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Loading     â”‚     â”‚      Error      â”‚     â”‚     Empty       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Loader   â”‚  â”‚     â”‚  â”‚   Bork    â”‚  â”‚     â”‚  â”‚ No Resultsâ”‚  â”‚
â”‚  â”‚  ~~~~~~   â”‚  â”‚     â”‚  â”‚  âš  Error  â”‚  â”‚     â”‚  â”‚ Available â”‚  â”‚
â”‚  â”‚  ~~~~~~   â”‚  â”‚     â”‚  â”‚  message  â”‚  â”‚     â”‚  â”‚           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Theme System

```scss
// CSS custom properties approach
.t-dark {
    --bg-primary: #1a1a2e;
    --text-primary: #ffffff;
    --accent: #e94560;
}

.t-blue {
    --bg-primary: #f0f4f8;
    --text-primary: #1a1a2e;
    --accent: #3b82f6;
}
```

---

## Angular Migration Guide

### Recommended Angular Structure

```
src/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”œâ”€â”€ api.service.ts          // APIHelper equivalent
â”‚   â”‚   â”‚   â”œâ”€â”€ patents-view.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ wikipedia.service.ts
â”‚   â”‚   â”‚   â””â”€â”€ theme.service.ts
â”‚   â”‚   â”œâ”€â”€ guards/
â”‚   â”‚   â””â”€â”€ interceptors/
â”‚   â”‚
â”‚   â”œâ”€â”€ shared/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ toolbar/
â”‚   â”‚   â”‚   â”œâ”€â”€ loader/
â”‚   â”‚   â”‚   â”œâ”€â”€ table/                   // ag-grid or mat-table
â”‚   â”‚   â”‚   â”œâ”€â”€ badge/
â”‚   â”‚   â”‚   â”œâ”€â”€ icon/
â”‚   â”‚   â”‚   â”œâ”€â”€ menu/                    // CMenu equivalent
â”‚   â”‚   â”‚   â””â”€â”€ sidebar/                 // AbstractSidebar system
â”‚   â”‚   â”œâ”€â”€ pipes/
â”‚   â”‚   â”‚   â”œâ”€â”€ pretty-bytes.pipe.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ timestamp.pipe.ts
â”‚   â”‚   â”‚   â””â”€â”€ accession-number.pipe.ts
â”‚   â”‚   â””â”€â”€ directives/
â”‚   â”‚
â”‚   â”œâ”€â”€ features/
â”‚   â”‚   â”œâ”€â”€ filings/
â”‚   â”‚   â”‚   â”œâ”€â”€ filings.component.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ filings.component.html
â”‚   â”‚   â”‚   â”œâ”€â”€ query-selector/
â”‚   â”‚   â”‚   â”œâ”€â”€ filter/
â”‚   â”‚   â”‚   â””â”€â”€ filings.module.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ document/
â”‚   â”‚   â”‚   â”œâ”€â”€ document.component.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ document-frame/
â”‚   â”‚   â”‚   â”œâ”€â”€ sidebars/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ root-sidebar/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ filing-sidebar/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ company-sidebar/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ entity-sidebar/
â”‚   â”‚   â”‚   â””â”€â”€ inferences/
â”‚   â”‚   â”‚       â”œâ”€â”€ inference.service.ts
â”‚   â”‚   â”‚       â””â”€â”€ inference-components/
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ company/
â”‚   â”‚   â”œâ”€â”€ holdings/
â”‚   â”‚   â””â”€â”€ patents/
â”‚   â”‚
â”‚   â”œâ”€â”€ app-routing.module.ts
â”‚   â””â”€â”€ app.module.ts
â”‚
â”œâ”€â”€ assets/
â”‚   â””â”€â”€ icons/                           // icomoon fonts
â”‚
â””â”€â”€ styles/
    â”œâ”€â”€ _variables.scss
    â”œâ”€â”€ _themes.scss
    â””â”€â”€ styles.scss
```

### Key Angular Equivalents

| React Pattern | Angular Equivalent |
|--------------|-------------------|
| `useState` | Component properties + ChangeDetectorRef |
| `useEffect` | `ngOnInit`, `ngOnChanges`, `ngOnDestroy` |
| `useContext` | Angular Services with `providedIn: 'root'` |
| `useLocalStorage` | Service with localStorage |
| `useEndpoint` | Service methods returning Observable |
| Context Provider | Angular Service + BehaviorSubject |
| `react-router-dom` | `@angular/router` |
| `react-base-table` | `ag-grid-angular` or `@angular/material` table |
| Props | `@Input()` decorators |
| Event handlers | `@Output()` + EventEmitter |

### State Management Options

1. **Simple approach**: Angular Services with BehaviorSubjects
2. **Complex state**: NgRx Store
3. **Reactive forms**: For query inputs

### Critical Implementation Notes

1. **iframe communication**: The document viewer uses `postMessage` for selection events - implement with `@HostListener('window:message')`

2. **Virtual scrolling**: Use `@angular/cdk/scrolling` or ag-grid for large table performance

3. **Sidebar stacking**: Implement as a service managing an array of sidebar configs with a container component

4. **Theme switching**: Use CSS custom properties with a class on `<body>` or use Angular Material theming

5. **Query persistence**: The TinyString pattern for sharing queries - implement with route params and a backend endpoint

---

## Feature Flags

```typescript
// Environment configuration
environment.ts
export const environment = {
    production: false,
    apiDomain: 'https://api.nullabroke.com',
    features: {
        filingsThumbnails: false,
        filingsSnippets: false,
    }
};
```

---

## External Dependencies to Replace

| React Package | Angular Equivalent |
|--------------|-------------------|
| `react-base-table` | `ag-grid-angular`, `@angular/material/table` |
| `react-router-dom` | `@angular/router` |
| `react-hook-form` | `@angular/forms` (Reactive Forms) |
| `react-beautiful-dnd` | `@angular/cdk/drag-drop` |
| `react-leaflet` | `ngx-leaflet` |
| `recharts` | `ngx-charts`, `chart.js` |
| `react-texty` | Custom directive with Tooltip |
| `use-debounce` | `rxjs/debounceTime` |
| `use-persisted-reducer` | Service with localStorage |
| `prismjs` | `ngx-prism` |
| `react-ace` | `ngx-ace-wrapper` |

---

This documentation should provide a comprehensive guide for rebuilding the application in Angular while maintaining the same functionality and user experience.

